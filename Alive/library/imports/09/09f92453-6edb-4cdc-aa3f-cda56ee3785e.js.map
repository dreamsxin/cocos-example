{"version":3,"sources":["../../../../../../assets/script/game/boss/assets/script/game/boss/shootManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../../assets/script/game/boss","sourcesContent":["import BulletFactory, { BulletType } from \"../bullet/bulletFactory\"\nimport { Util } from \"../../util\"\n\nconst {ccclass, property} = cc._decorator\n\n@ccclass\nexport default class ShootManager extends cc.Component {\n\n    @property({\n        type: BulletFactory\n    })\n    bulletFactory: BulletFactory | undefined = undefined\n\n    @property({\n        type: cc.Node\n    })\n    enemy: cc.Node | undefined = undefined\n\n    /** 月牙型子弹角度 */\n    typeMBulletAngle: number = 0\n\n    start (): void {\n        // 难度递增\n        let deltaTime: number = 5\n        let startTime: number = 4\n        // 匿名函数不会被同计时器覆盖\n        this.schedule(() => this.shoot(BulletType.R), 0.02, cc.macro.REPEAT_FOREVER, startTime)\n        this.schedule(() => this.shoot(BulletType.M), 0.06, cc.macro.REPEAT_FOREVER, startTime + 1 * deltaTime)\n        this.schedule(() => this.shoot(BulletType.F), 0.4, cc.macro.REPEAT_FOREVER, startTime + 2 * deltaTime)\n        this.schedule(() => this.shoot(BulletType.R), 0.02, cc.macro.REPEAT_FOREVER, startTime + 3 * deltaTime)\n        this.schedule(() => this.shoot(BulletType.B), 0.5, cc.macro.REPEAT_FOREVER, startTime + 4 * deltaTime)\n        this.schedule(() => this.shoot(BulletType.M), 0.06, cc.macro.REPEAT_FOREVER, startTime + 5 * deltaTime)\n        this.schedule(() => this.shoot(BulletType.R), 0.02, cc.macro.REPEAT_FOREVER, startTime + 6 * deltaTime)\n        this.schedule(() => this.shoot(BulletType.F), 0.4, cc.macro.REPEAT_FOREVER, startTime + 7 * deltaTime)\n    }\n\n    /** 简单射击工厂 */\n    shoot (type: BulletType): void {\n        if (type === BulletType.R) {\n            // 随机型\n            let bullet: cc.Node = this.bulletFactory.createBullet(BulletType.R, Util.randomDir(0, 360),  800)\n            bullet.setPosition(this.enemy.x, this.enemy.y)\n        } else if (type === BulletType.M) {\n            // 轮盘型\n            this.typeMBulletAngle += 30\n            if (this.typeMBulletAngle >= 360) {\n                this.typeMBulletAngle = 0\n            }\n            let rad = cc.misc.degreesToRadians(this.typeMBulletAngle)\n            let bullet: cc.Node = this.bulletFactory.createBullet(BulletType.M, cc.v2(Math.cos(rad), Math.sin(rad)), 650)\n            bullet.angle = this.typeMBulletAngle + 90\n            bullet.setPosition(this.enemy.x, this.enemy.y)\n        } else if (type === BulletType.F) {\n            // 花型\n            for (let i = 0; i <= 360 ; i += 30) {\n                let rad = cc.misc.degreesToRadians(i)\n                let bullet: cc.Node = this.bulletFactory.createBullet(BulletType.F, cc.v2(Math.cos(rad), Math.sin(rad)), 600)\n                bullet.setPosition(this.enemy.x, this.enemy.y)\n            }\n        } else if (type === BulletType.B) {\n            // duang～ 型\n            let bullet: cc.Node = this.bulletFactory.createBullet(BulletType.B, cc.v2(0, -1), 550)\n            bullet.setPosition(this.enemy.x, this.enemy.y)\n        }\n    }\n\n}\n"]}