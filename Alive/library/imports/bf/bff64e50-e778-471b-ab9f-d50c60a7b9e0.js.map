{"version":3,"sources":["../../../../../../assets/script/game/bullet/assets/script/game/bullet/bulletBase.ts"],"names":[],"mappings":";;;;;AAEM,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAyB,CAAA;AAGzC;IAAgC,8BAAY;IAD5C;QAAA,qEA6DC;QA1DG,WAAW;QACX,cAAQ,GAAY,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;QASrC,WAAW;QACX,gBAAU,GAAW,CAAC,CAAA;QAStB,aAAa;QACL,SAAG,GAA2B,SAAS,CAAA;QAE/C,WAAW;QACH,mBAAa,GAA8B,SAAS,CAAA;;IAkChE,CAAC;IAxDG,sBAAI,+BAAO;aAAX;YACI,OAAO,IAAI,CAAC,QAAQ,CAAA;QACxB,CAAC;aACD,UAAa,GAAY;YACrB,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAA;YACvB,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAA;QAC3B,CAAC;;;OAJA;IAQD,sBAAI,iCAAS;aAAb;YACI,OAAO,IAAI,CAAC,UAAU,CAAA;QAC1B,CAAC;aACD,UAAe,KAAa;YACxB,IAAI,KAAK,GAAG,CAAC,EAAE;gBAAE,OAAM;aAAE;YACzB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAA;QAC3B,CAAC;;;OAJA;IAYD,mBAAmB;IACnB,0BAAK,GAAL,UAAO,aAA4B,EAAE,GAAY,EAAE,KAAa,EAAE,GAAe;QAC7E,IAAI,CAAC,aAAa,GAAG,aAAa,CAAA;QAClC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;QACtB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAA;QACd,IAAI,CAAC,OAAO,GAAG,GAAG,CAAA;IACtB,CAAC;IAED,0BAAK,GAAL;QACI,mBAAmB;IACvB,CAAC;IAED,YAAY;IACZ,qCAAgB,GAAhB,UAAkB,KAAkB,EAAE,IAAiB;QACnD,iBAAiB;IACrB,CAAC;IAED,2BAAM,GAAN,UAAQ,EAAU;QACd,IAAI,IAAI,CAAC,SAAS,KAAK,CAAC,EAAE;YAAE,OAAM;SAAE;QACpC,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,EAAE;YACtB,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,GAAG,EAAE,CAAA;SACtD;QACD,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,EAAE;YACtB,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,GAAG,EAAE,CAAA;SACtD;QACD,WAAW;QACX,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE;YAC5D,mBAAmB;YACnB,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;SAC1D;IACL,CAAC;IA1DQ,UAAU;QADtB,OAAO;OACK,UAAU,CA4DtB;IAAD,iBAAC;CA5DD,AA4DC,CA5D+B,EAAE,CAAC,SAAS,GA4D3C;AA5DY,gCAAU","file":"","sourceRoot":"../../../../../../assets/script/game/bullet","sourcesContent":["import BulletFactory, { BulletType } from \"../bullet/bulletFactory\"\n\nconst {ccclass, property} = cc._decorator\n\n@ccclass\nexport class BulletBase extends cc.Component {\n\n    /** 移动方向 */\n    _moveDir: cc.Vec2 = new cc.Vec2(0, 0)\n    get moveDir (): cc.Vec2 {\n        return this._moveDir\n    }\n    set moveDir (dir: cc.Vec2) {\n        this._moveDir.x = dir.x\n        this._moveDir.y = dir.y\n    }\n    \n    /** 移动速度 */\n    _moveSpeed: number = 0\n    get moveSpeed (): number {\n        return this._moveSpeed\n    }\n    set moveSpeed (speed: number) {\n        if (speed < 0) { return }\n        this._moveSpeed = speed\n    }\n\n    /** 子弹类型标签 */\n    private tag: BulletType | undefined = undefined\n\n    /** 子弹工厂 */\n    private bulletFactory: BulletFactory | undefined = undefined\n\n    /** 从节点池取出时初始化属性 */\n    reuse (bulletFactory: BulletFactory, dir: cc.Vec2, speed: number, tag: BulletType): void {\n        this.bulletFactory = bulletFactory\n        this.moveSpeed = speed\n        this.tag = tag\n        this.moveDir = dir\n    }\n\n    unuse (): void {\n        // Util.log('回收成功')\n    }\n\n    /** 碰撞后回调 */\n    onCollisionEnter (other: cc.Collider, self: cc.Collider): void {\n        // Util.log('碰撞')\n    }\n\n    update (dt: number): void {\n        if (this.moveSpeed === 0) { return }\n        if (this.moveDir.x !== 0) {\n            this.node.x += this.moveDir.x * this.moveSpeed * dt\n        }\n        if (this.moveDir.y !== 0) {\n            this.node.y += this.moveDir.y * this.moveSpeed * dt\n        }\n        /** 边界回收 */\n        if (Math.abs(this.node.x) > 360 || Math.abs(this.node.y) > 640) {\n            // Util.log('边界回收')\n            this.bulletFactory.bulletPools[this.tag].put(this.node)\n        }\n    }\n\n}\n"]}