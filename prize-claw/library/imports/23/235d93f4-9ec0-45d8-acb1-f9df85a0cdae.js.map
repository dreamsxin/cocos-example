{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "addScript",
    "script",
    "document",
    "createElement",
    "body",
    "appendChild",
    "src",
    "uri",
    "then",
    "func",
    "onload",
    "axios",
    "defaults",
    "withCredentials",
    "location",
    "search",
    "includes",
    "eruda",
    "init",
    "openCollision",
    "manager",
    "cc",
    "director",
    "getCollisionManager",
    "enabled",
    "port",
    "enabledDebugDraw",
    "Class",
    "extends",
    "Component",
    "properties",
    "game",
    "default",
    "type",
    "shop",
    "audio",
    "record",
    "login",
    "onLoad",
    "window",
    "_main",
    "gift",
    "node",
    "getChildByName",
    "getComponent",
    "api",
    "spriteFrames",
    "active",
    "getUserInfo",
    "res",
    "data",
    "ok",
    "code",
    "getParam",
    "nickname",
    "r",
    "balance",
    "phone",
    "avatar",
    "profileImg",
    "starsNum",
    "user",
    "score",
    "Label",
    "string",
    "updateStars",
    "authorize"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "import Game from 'game'\r\nimport Shop from 'shop'\r\nimport Audio from 'audio'\r\nimport Record from 'record'\r\nimport Login from 'login'\r\nimport api from 'api'\r\nimport user from 'user'\r\n\r\n\r\nconst addScript = uri => {\r\n    const script = document.createElement('script')\r\n    document.body.appendChild(script)\r\n    script.src = uri\r\n    return {\r\n        then(func) {\r\n            func ? script.onload = func : null\r\n        }\r\n    }\r\n\r\n}\r\n\r\naddScript('//cdn.yoosh.tv/js/axios.min.js')\r\n.then(() => {\r\n    axios.defaults.withCredentials = true\r\n})\r\n\r\n\r\nif (location.search.includes('alpha')) {\r\n    addScript('//cdn.yoosh.tv/js/eruda.min.js')\r\n    .then(() => eruda.init())\r\n}\r\n\r\n\r\n\r\n\r\n\r\nconst openCollision = () => {\r\n    const manager = cc.director.getCollisionManager()\r\n    manager.enabled = true\r\n\r\n    /*\r\n    * 开启 debug 模式\r\n    * 正式环境下关闭\r\n    */\r\n    if (location.port === '7456') {\r\n        manager.enabledDebugDraw = true\r\n    }\r\n}\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        game: {\r\n            default: null,\r\n            type: Game\r\n        },\r\n        shop: {\r\n            default: null,\r\n            type: Shop\r\n        },\r\n        audio: {\r\n            default: null,\r\n            type: Audio\r\n        },\r\n        record: {\r\n            default: null,\r\n            type: Record\r\n        },\r\n        login: {\r\n            default: null,\r\n            type: Login\r\n        }\r\n    },\r\n    onLoad() {\r\n\r\n        // 开启碰撞检测\r\n        openCollision()\r\n\r\n        window._main = this\r\n\r\n        //\r\n        this.gift = this.node.getChildByName('game')\r\n            .getComponent('gift')\r\n\r\n        this.api = api\r\n\r\n        this.spriteFrames = this.node.getComponent('spriteFrame')\r\n\r\n        this.game.node.active = false\r\n\r\n        api.getUserInfo()\r\n        .then(res => {\r\n            if (!res.data.ok) {\r\n                const code = api.getParam('code')\r\n                if (code) {\r\n                    api.login(code)\r\n                    .then(res => {\r\n                        if (res.data.ok) {\r\n                            user.nickname = res.data.r.nickname\r\n                            user.balance = res.data.r.balance\r\n                            user.phone = res.data.r.phone\r\n                            user.avatar = res.data.r.profileImg\r\n                            user.starsNum = res.data.r.starsNum\r\n                            this.user = user\r\n\r\n                            this.game.score.getComponent(cc.Label)\r\n                                .string = user.balance\r\n\r\n                            this.game.node.active = true\r\n                            this.game.updateStars()\r\n                        }\r\n                    })\r\n                } else api.authorize()\r\n            } else {\r\n                user.nickname = res.data.r.nickname\r\n                user.balance = res.data.r.balance\r\n                user.phone = res.data.r.phone\r\n                user.avatar = res.data.r.profileImg\r\n                user.starsNum = res.data.r.starsNum\r\n\r\n                this.user = user\r\n\r\n                this.game.score.getComponent(cc.Label)\r\n                    .string = user.balance\r\n\r\n                this.game.node.active = true\r\n                this.game.updateStars()\r\n                \r\n            }\r\n        })\r\n    }\r\n})\r\n"
  ]
}