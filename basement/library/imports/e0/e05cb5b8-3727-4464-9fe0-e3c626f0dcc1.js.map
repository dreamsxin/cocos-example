{"version":3,"sources":["../../../../assets/Script/assets/Script/main.js"],"names":["cc","Class","extends","Component","properties","player","default","type","Node","wallWidth","dici","Prefab","diciCount","dici_duration","bgAudio","url","AudioClip","jumpAudio","playTime","timeLabe","Label","scoreLabel","score","moveLeft","goleft","moveTo","p","node","width","getPositionY","goL1","goL2","sque","sequence","rotationY","runAction","moveRight","goright","goR1","goR2","NewDici","newDici","instantiate","addChild","randD","random0To1","setPosition","diciPosition","randX","randY","height","setInputControl","listener","event","EventListener","TOUCH_ONE_BY_ONE","onTouchBegan","touches","audioEngine","playEffect","target","getCurrentTarget","locationInNode","convertToNodeSpace","getLocation","x","sys","localStorage","setItem","string","eventManager","addListener","onLoad","setEffectsVolume","playMusic","director","preloadScene","i","schedule","pauseMusic","loadScene","start"],"mappings":"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","file":"main.js","sourceRoot":"../../../../assets/Script","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        player: {\n            default: null,\n            type: cc.Node\n        },\n        wallWidth: 80,\n        dici: {\n            default: null,\n            type: cc.Prefab\n        },\n        diciCount: 0,\n        dici_duration: 140, //地刺距离地面对距离\n        bgAudio: {\n            default: null,\n            url: cc.AudioClip\n        },\n        jumpAudio: {\n            default: null,\n            url: cc.AudioClip\n        },\n        playTime: 60, //游戏时间，倒计时\n        timeLabe: {\n            default: null,\n            type: cc.Label\n        },\n        scoreLabel: {\n            default: null,\n            type: cc.Label\n        },\n        score: 0,\n    },\n    moveLeft() {\n        let goleft = cc.moveTo(0.2, cc.p(-this.node.width / 2 + this.wallWidth, this.player.getPositionY()));\n        var goL1 = cc.moveTo(0.1, cc.p(-this.node.width / 2 + this.wallWidth + 30, this.player.getPositionY()))\n        var goL2 = cc.moveTo(0.1, cc.p(-this.node.width / 2 + this.wallWidth, this.player.getPositionY()));\n        var sque = cc.sequence(goL1, goL2);\n        if (this.player.rotationY === 0) {\n            this.player.runAction(sque);\n        } else {\n\n            this.player.runAction(goleft);\n        }\n        this.player.rotationY = 0;\n\n    },\n    moveRight() {\n\n        let goright = cc.moveTo(0.2, cc.p(this.node.width / 2 - this.wallWidth, this.player.getPositionY()));\n        var goR1 = cc.moveTo(0.1, cc.p(this.node.width / 2 - this.wallWidth - 30, this.player.getPositionY()))\n        var goR2 = cc.moveTo(0.1, cc.p(this.node.width / 2 - this.wallWidth, this.player.getPositionY()));\n        var sque = cc.sequence(goR1, goR2);\n        if (this.player.rotationY === 180) {\n            this.player.runAction(sque);\n        } else {\n            this.player.runAction(goright);\n        }\n        this.player.rotationY = 180;\n    },\n    NewDici() {\n        this.diciCount++;\n        var newDici = cc.instantiate(this.dici);\n        this.node.addChild(newDici);\n        var randD = cc.random0To1();\n        if (randD >= 0.5) {\n            newDici.rotationY = 0;\n        } else {\n            newDici.rotationY = 180;\n        }\n        newDici.setPosition(this.diciPosition(randD));\n    },\n    diciPosition(randD) {\n        var randX = 0;\n        var randY = 0;\n        if (randD >= 0.5) {\n            randX = this.node.width / 2 - this.wallWidth;\n        } else {\n            randX = -this.node.width / 2 + this.wallWidth;\n\n        }\n        if (this.diciCount <= 8) {\n            randY = (this.node.height / 2) - (this.dici_duration * this.diciCount) - this.dici_duration * 1;\n        } else {\n            randY = (this.node.height / 2) - (this.dici_duration * 8) - this.dici_duration * 1;\n        }\n\n        return cc.p(randX, randY);\n    },\n    // LIFE-CYCLE CALLBACKS:\n    // 监听玩家输入\n    setInputControl() {\n        var listener = {\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\n            onTouchBegan: (touches, event) => {\n                cc.audioEngine.playEffect(this.jumpAudio, false);\n                var target = event.getCurrentTarget(); //获取事件所绑定的target\n                var locationInNode = target.convertToNodeSpace(touches.getLocation()); //获取坐标信息\n\n                if (locationInNode.x > this.node.width / 2) {\n                    this.moveRight();\n                } else {\n                    this.moveLeft();\n                }\n                //把分数存储到本地\n                this.score += 1;\n                cc.sys.localStorage.setItem(\"score\", this.score);\n\n                this.scoreLabel.string = this.score;\n                this.NewDici();\n                return true; //这里必须要写 return true\n            }\n        };\n        cc.eventManager.addListener(listener, this.node);\n    },\n    onLoad() {\n        this.score = 0;\n        //设置音效的音量\n        cc.audioEngine.setEffectsVolume(0.2);\n        cc.audioEngine.playMusic(this.bgAudio, true);\n        this.setInputControl();\n        cc.director.preloadScene(\"gameoverScene\");\n        this.player.setPosition(-this.node.width / 2 + 80, this.node.height / 2 - 175);\n        for (var i = 0; i < 8; i++) {\n            this.NewDici();\n        }\n        this.schedule(function() {\n            this.playTime--;\n            this.timeLabe.string = \"倒计时:\" + this.playTime;\n            if (this.playTime <= 0) {\n                cc.audioEngine.pauseMusic();\n                cc.director.loadScene('OverScene');\n            }\n        }, 1);\n\n    },\n\n    start() {\n\n    },\n\n    // update (dt) {},\n});"]}