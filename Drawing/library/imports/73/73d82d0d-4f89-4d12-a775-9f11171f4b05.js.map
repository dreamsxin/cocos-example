{"version":3,"sources":["../../../../assets/scripts/assets/scripts/SubBtnsUI.js"],"names":["cc","Class","extends","Component","properties","subBtnsAnim","Animation","btnShowSub","Button","btnHideSub","pushAnimationNames","default","type","String","popAnimationNames","containers","Node","onLoad","state","oldState","isShow","needShow","node","active","on","event","stopPropagation","showBtn","showSubBtns","hideBtn","hideSubBtns","undefined","play","onFinishAnim","finishFold"],"mappings":"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","file":"SubBtnsUI.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        subBtnsAnim: cc.Animation,\n        btnShowSub: cc.Button,\n        btnHideSub: cc.Button,\n\n        pushAnimationNames : {\n            default: [],\n            type: cc.String\n        },\n\n        popAnimationNames : {\n            default: [],\n            type: cc.String\n        },\n\n        containers : {\n            default : [],\n            type : cc.Node\n        },\n\n\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.state = 0; // 0.画笔 1.贴纸 2.画布背景\n        this.oldState = 0;\n        this.isShow = false;\n        this.needShow = false;\n        this.btnShowSub.node.active = true;\n        this.btnHideSub.node.active = false;\n\n        \n        //防止画板接收菜单touch事件\n        this.node.on('touchend', function (event) {\n            event.stopPropagation();\n        }, this);\n\n        this.node.on('touchmove', function (event) {\n            event.stopPropagation();\n        }, this);\n\n        this.node.on('touchstart', function (event) {\n            event.stopPropagation();\n        }, this);\n\n        this.node.on('touchcancel', function (event) {\n            event.stopPropagation();\n        }, this);\n    },\n\n\n    showBtn () {\n        this.showSubBtns(this.state);\n    },\n\n    hideBtn () {\n        this.hideSubBtns(this.state);\n    },\n\n    showSubBtns: function(state) {\n\n        //没有显示菜单\n        if (!this.isShow && state > -1) {\n            this.state = state\n            if (this.oldState != this.state && this.oldState != undefined) {\n                this.containers[this.oldState].active = false;\n            }\n            this.needShow = false\n            this.subBtnsAnim.play(this.pushAnimationNames[this.state]);\n            this.containers[this.state].active = true;\n            this.oldState = this.state;\n        }else{\n\n            if (state < 0){\n                this.state = state\n                this.hideBtn()\n                return;\n            }\n\n            //已显示\n            if (state == this.state) {\n                return;\n            }\n            //先pop原来的菜单\n            this.subBtnsAnim.play(this.popAnimationNames[this.oldState]);\n            this.state = state\n            this.needShow = true\n        }\n        \n    },\n\n    hideSubBtns: function (state) {\n\n        if (!this.isShow) {\n            return\n        }\n\n        if (state < 0) {\n            this.subBtnsAnim.play(this.popAnimationNames[this.oldState]);\n        }else{\n            this.state = state;\n            this.subBtnsAnim.play(this.popAnimationNames[this.state]);\n        }\n    },\n\n\n    onFinishAnim: function (finishFold) {\n        this.btnShowSub.node.active = finishFold;\n        this.btnHideSub.node.active = !finishFold;\n        this.isShow = !finishFold\n        if (this.needShow){\n            this.showBtn()\n        }\n    },\n\n\n\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n\n"]}